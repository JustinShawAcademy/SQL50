## 1280. [Students and Examinations](https://leetcode.com/problems/students-and-examinations/description/?envType=study-plan-v2&envId=top-sql-50)
* Easy Problem

### SQL Solution
#### Concepts / Syntax
`CROSS JOIN`, `LEFT JOIN`, `GROUP BY`

#### Intuition

#### Approach
1. We want to `CROSS JOIN` `Students` and `Subjects` so that we may have a table that has a rows of each students and the subjects in their school. 
```sql
SELECT *
FROM Students stt
CROSS JOIN Subjects sub
```
```
| student_id | student_name | subject_name |
| ---------- | ------------ | ------------ |
| 1          | Alice        | Math         |
| 2          | Bob          | Math         |
| 13         | John         | Math         |
| 6          | Alex         | Math         |
| 1          | Alice        | Physics      |
| 2          | Bob          | Physics      |
| 13         | John         | Physics      |
| 6          | Alex         | Physics      |
| 1          | Alice        | Programming  |
| 2          | Bob          | Programming  |
| 13         | John         | Programming  |
| 6          | Alex         | Programming  |
```

2. Now we want to `LEFT JOIN` the `Examinations` table onto the table we create above. We do this because we want every row to be an exam a student took or not took. 
```sql
SELECT *
FROM Students stu
CROSS JOIN Subjects sub
LEFT JOIN Examinations exam
ON 
    stu.student_id = exam.student_id
    AND sub.subject_name = exam.subject_name
```
```
| student_id | student_name | subject_name | student_id | subject_name |
| ---------- | ------------ | ------------ | ---------- | ------------ |
| 1          | Alice        | Math         | 1          | Math         |
| 1          | Alice        | Math         | 1          | Math         |
| 1          | Alice        | Math         | 1          | Math         |
| 2          | Bob          | Math         | 2          | Math         |
| 13         | John         | Math         | 13         | Math         |
| 6          | Alex         | Math         | null       | null         |
| 1          | Alice        | Physics      | 1          | Physics      |
| 1          | Alice        | Physics      | 1          | Physics      |
| 2          | Bob          | Physics      | null       | null         |
| 13         | John         | Physics      | 13         | Physics      |
| 6          | Alex         | Physics      | null       | null         |
| 1          | Alice        | Programming  | 1          | Programming  |
| 2          | Bob          | Programming  | 2          | Programming  |
| 13         | John         | Programming  | 13         | Programming  |
| 6          | Alex         | Programming  | null       | null         |
```

3. For grouping, we would like to group each student_id of the `Student` table and then for each student (student_id) we would like to group the subject_name form the `Subject` table. This is because we want the number of exams for each subject in each student.
```sql
SELECT *
FROM Students stu
CROSS JOIN Subjects sub
LEFT JOIN Examinations exam
ON 
    stu.student_id = exam.student_id
    AND sub.subject_name = exam.subject_name
GROUP BY
    stu.student_id
    , sub.subject_name
```
```
| student_id | student_name | subject_name | student_id | subject_name |
| ---------- | ------------ | ------------ | ---------- | ------------ |
| 1          | Alice        | Programming  | 1          | Programming  |
| 1          | Alice        | Physics      | 1          | Physics      |
| 1          | Alice        | Math         | 1          | Math         |
| 2          | Bob          | Programming  | 2          | Programming  |
| 2          | Bob          | Physics      | null       | null         |
| 2          | Bob          | Math         | 2          | Math         |
| 13         | John         | Programming  | 13         | Programming  |
| 13         | John         | Physics      | 13         | Physics      |
| 13         | John         | Math         | 13         | Math         |
| 6          | Alex         | Programming  | null       | null         |
| 6          | Alex         | Physics      | null       | null         |
| 6          | Alex         | Math         | null       | null         |
```

4. Using COUNT() we can count how many rows are stacked in each e.subject_name
```sql
SELECT 
    stu.student_id
    , stu.student_name  
    , sub.subject_name
    , COUNT(exam.subject_name) AS attended_exams
FROM Students stu
CROSS JOIN Subjects sub
LEFT JOIN Examinations exam
ON 
    stu.student_id = exam.student_id
    AND sub.subject_name = exam.subject_name
GROUP BY
    stu.student_id
    , sub.subject_name
```
```
| student_id | student_name | subject_name | attended_exams |
| ---------- | ------------ | ------------ | -------------- |
| 1          | Alice        | Programming  | 1              |
| 1          | Alice        | Physics      | 2              |
| 1          | Alice        | Math         | 3              |
| 2          | Bob          | Programming  | 1              |
| 2          | Bob          | Physics      | 0              |
| 2          | Bob          | Math         | 1              |
| 13         | John         | Programming  | 1              |
| 13         | John         | Physics      | 1              |
| 13         | John         | Math         | 1              |
| 6          | Alex         | Programming  | 0              |
| 6          | Alex         | Physics      | 0              |
| 6          | Alex         | Math         | 0              |
```

5. Now we just simply `ORDER BY` to what the question asks
```sql
SELECT 
    stu.student_id
    , stu.student_name  
    , sub.subject_name
    , COUNT(exam.subject_name) AS attended_exams
FROM Students stu
CROSS JOIN Subjects sub
LEFT JOIN Examinations exam
ON 
    stu.student_id = exam.student_id
    AND sub.subject_name = exam.subject_name
GROUP BY
    stu.student_id
    , sub.subject_name
ORDER BY
    stu.student_id
    , sub.subject_name
```
```
| student_id | student_name | subject_name | attended_exams |
| ---------- | ------------ | ------------ | -------------- |
| 1          | Alice        | Math         | 3              |
| 1          | Alice        | Physics      | 2              |
| 1          | Alice        | Programming  | 1              |
| 2          | Bob          | Math         | 1              |
| 2          | Bob          | Physics      | 0              |
| 2          | Bob          | Programming  | 1              |
| 6          | Alex         | Math         | 0              |
| 6          | Alex         | Physics      | 0              |
| 6          | Alex         | Programming  | 0              |
| 13         | John         | Math         | 1              |
| 13         | John         | Physics      | 1              |
| 13         | John         | Programming  | 1              |
```

#### Code
```sql
SELECT 
    stu.student_id
    , stu.student_name  
    , sub.subject_name
    , COUNT(exam.subject_name) AS attended_exams
FROM Students stu
CROSS JOIN Subjects sub
LEFT JOIN Examinations exam
ON 
    stu.student_id = exam.student_id
    AND sub.subject_name = exam.subject_name
GROUP BY
    stu.student_id
    , sub.subject_name
ORDER BY
    stu.student_id
    , sub.subject_name
```
